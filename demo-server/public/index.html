<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ALIS - AJAX-Like Intelligent System</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/demo/public/styles.css">
</head>
<body>
  <!-- Toast Container -->
  <div id="toast-container" class="toast-container"></div>

  <!-- Modal -->
  <div id="modal-overlay" class="modal-overlay">
    <div class="modal">
      <button class="modal-close" onclick="closeModal()">√ó</button>
      <div id="modal-body" class="modal-body"></div>
    </div>
  </div>

  <!-- Sidebar Navigation -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <span class="logo-icon">‚ö°</span>
        <span class="logo-text">ALIS</span>
      </div>
      <span class="version-badge">v0.0.1</span>
    </div>
    
    <nav class="sidebar-nav">
      <div class="nav-section">
        <span class="nav-section-title">Core Features</span>
        <a href="#search" class="nav-item active">
          <span class="nav-icon">üîç</span>
          <span>Debounced Search</span>
        </a>
        <a href="#forms" class="nav-item">
          <span class="nav-icon">üìù</span>
          <span>Form Handling</span>
        </a>
        <a href="#crud" class="nav-item">
          <span class="nav-icon">üë•</span>
          <span>CRUD Operations</span>
        </a>
        <a href="#validation" class="nav-item">
          <span class="nav-icon">‚úÖ</span>
          <span>Validation</span>
        </a>
      </div>
      
      <div class="nav-section">
        <span class="nav-section-title">Advanced</span>
        <a href="#loading" class="nav-item">
          <span class="nav-icon">‚è≥</span>
          <span>Loading States</span>
        </a>
        <a href="#retry" class="nav-item">
          <span class="nav-icon">üîÑ</span>
          <span>Auto Retry</span>
        </a>
        <a href="#confirm" class="nav-item">
          <span class="nav-icon">‚ö†Ô∏è</span>
          <span>Confirmations</span>
        </a>
        <a href="#hooks" class="nav-item">
          <span class="nav-icon">ü™ù</span>
          <span>Hooks</span>
        </a>
      </div>
      
      <div class="nav-section">
        <span class="nav-section-title">Data Collection</span>
        <a href="#container" class="nav-item">
          <span class="nav-icon">üì¶</span>
          <span>Container Collect</span>
        </a>
        <a href="#custom" class="nav-item">
          <span class="nav-icon">üé®</span>
          <span>Custom Components</span>
        </a>
      </div>
    </nav>
    
    <div class="sidebar-footer">
      <button class="theme-toggle" onclick="toggleTheme()">
        <span class="theme-icon">üåô</span>
        <span>Dark Mode</span>
      </button>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <header class="page-header">
      <div class="header-content">
        <div>
          <h1 class="page-title">ALIS Framework Demo</h1>
          <p class="page-subtitle">Declarative AJAX for modern web applications</p>
        </div>
        <div class="header-stats">
          <div class="stat">
            <span class="stat-value" id="request-count">0</span>
            <span class="stat-label">Requests</span>
          </div>
          <div class="stat">
            <span class="stat-value" id="success-count">0</span>
            <span class="stat-label">Success</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Sections -->
    <div class="sections">
      
      <!-- Search Section -->
      <section id="search" class="section">
        <div class="section-header">
          <div class="section-icon">üîç</div>
          <div>
            <h2 class="section-title">Debounced Search</h2>
            <p class="section-desc">Real-time search with automatic debouncing. Type and watch requests fire after 300ms of inactivity.</p>
          </div>
        </div>
        
        <div class="demo-card">
          <div class="code-preview">
            <code>&lt;input data-alis-get="/api/search" data-alis-trigger="input delay:300ms" data-alis-target="#results"&gt;</code>
          </div>
          
          <div class="search-box">
            <span class="search-icon">üîç</span>
            <input type="text" 
                   id="search-input"
                   name="q"
                   class="search-input"
                   placeholder="Search users and products..."
                   autocomplete="off"
                   data-alis-get="/api/search"
                   data-alis-trigger="input delay:300ms"
                   data-alis-target="#search-results"
                   data-alis-collect="self"
                   data-alis-indicator="is-loading">
          </div>
          
          <div id="search-results" class="search-results">
            <div class="empty-state">
              <span class="empty-icon">üí°</span>
              <span>Start typing to see live search results</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Forms Section -->
      <section id="forms" class="section">
        <div class="section-header">
          <div class="section-icon">üìù</div>
          <div>
            <h2 class="section-title">Form Handling</h2>
            <p class="section-desc">Automatic form serialization with all input types. Just add <code>data-alis</code> to any form.</p>
          </div>
        </div>
        
        <div class="demo-card">
          <div class="code-preview">
            <code>&lt;form data-alis action="/api/contact" method="post" data-alis-target="#result"&gt;</code>
          </div>
          
          <form id="contact-form" 
                data-alis 
                data-alis-target="#contact-result"
                data-alis-swap="innerHTML"
                action="/api/contact" 
                method="post">
            <div class="form-grid">
              <div class="form-group">
                <label>Name</label>
                <input type="text" name="name" class="input" placeholder="John Doe">
                <span data-valmsg-for="name" class="field-error"></span>
              </div>
              <div class="form-group">
                <label>Email</label>
                <input type="email" name="email" class="input" placeholder="john@example.com">
                <span data-valmsg-for="email" class="field-error"></span>
              </div>
              <div class="form-group full-width">
                <label>Subject</label>
                <select name="subject" class="input">
                  <option value="">Select subject...</option>
                  <option value="general">General Inquiry</option>
                  <option value="support">Technical Support</option>
                  <option value="feedback">Feedback</option>
                </select>
                <span data-valmsg-for="subject" class="field-error"></span>
              </div>
              <div class="form-group full-width">
                <label>Message</label>
                <textarea name="message" class="input textarea" rows="3" placeholder="Your message..."></textarea>
                <span data-valmsg-for="message" class="field-error"></span>
              </div>
              <div class="form-group full-width">
                <label class="checkbox-label">
                  <input type="checkbox" name="agree" value="yes">
                  <span>I agree to the terms</span>
                </label>
                <span data-valmsg-for="agree" class="field-error"></span>
              </div>
            </div>
            <div class="form-actions">
              <button type="reset" class="btn btn-ghost">Clear</button>
              <button type="submit" class="btn btn-primary">
                <span>Send Message</span>
              </button>
            </div>
          </form>
          <div id="contact-result" class="result-area"></div>
        </div>
      </section>

      <!-- CRUD Section -->
      <section id="crud" class="section">
        <div class="section-header">
          <div class="section-icon">üë•</div>
          <div>
            <h2 class="section-title">CRUD Operations</h2>
            <p class="section-desc">Full Create, Read, Update, Delete with automatic table refresh and modal forms.</p>
          </div>
        </div>
        
        <div class="demo-card">
          <div class="card-toolbar">
            <div class="filter-group">
              <select id="filter-role" name="role" class="input input-sm">
                <option value="">All Roles</option>
                <option value="Admin">Admin</option>
                <option value="Editor">Editor</option>
                <option value="Viewer">Viewer</option>
              </select>
              <select id="filter-status" name="status" class="input input-sm">
                <option value="">All Status</option>
                <option value="active">Active</option>
                <option value="inactive">Inactive</option>
                <option value="pending">Pending</option>
              </select>
              <button id="refresh-users" 
                      class="btn btn-ghost btn-sm"
                      data-alis-get="/api/users"
                      data-alis-target="#users-table"
                      data-alis-collect="closest:.filter-group"
                      data-alis-indicator="is-loading">
                üîÑ Refresh
              </button>
            </div>
            <button class="btn btn-primary btn-sm" onclick="showAddUserModal()">
              ‚ûï Add User
            </button>
          </div>
          
          <div class="table-wrapper">
            <table class="data-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Role</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="users-table">
                <tr><td colspan="6" class="loading-cell">Loading...</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Validation Section -->
      <section id="validation" class="section">
        <div class="section-header">
          <div class="section-icon">‚úÖ</div>
          <div>
            <h2 class="section-title">Server-Side Validation</h2>
            <p class="section-desc">Automatic display of validation errors using RFC 7807 Problem Details. Errors appear next to fields.</p>
          </div>
        </div>
        
        <div class="demo-card">
          <div class="code-preview">
            <code>Server returns: { "errors": { "email": ["Email is required"] } }</code>
          </div>
          
          <form data-alis 
                data-alis-target="#validation-result"
                action="/api/validate-demo" 
                method="post">
            <div class="form-grid">
              <div class="form-group">
                <label>Username (min 3 chars)</label>
                <input type="text" name="username" class="input" placeholder="Enter username">
                <span data-valmsg-for="username" class="field-error"></span>
              </div>
              <div class="form-group">
                <label>Email (must be valid)</label>
                <input type="text" name="email" class="input" placeholder="Enter email">
                <span data-valmsg-for="email" class="field-error"></span>
              </div>
              <div class="form-group">
                <label>Age (18-120)</label>
                <input type="number" name="age" class="input" placeholder="Enter age">
                <span data-valmsg-for="age" class="field-error"></span>
              </div>
              <div class="form-group">
                <label>Password (min 8 chars)</label>
                <input type="password" name="password" class="input" placeholder="Enter password">
                <span data-valmsg-for="password" class="field-error"></span>
              </div>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn btn-primary">Validate</button>
            </div>
          </form>
          <div id="validation-result" class="result-area"></div>
        </div>
      </section>

      <!-- Loading Section -->
      <section id="loading" class="section">
        <div class="section-header">
          <div class="section-icon">‚è≥</div>
          <div>
            <h2 class="section-title">Loading Indicators</h2>
            <p class="section-desc">Automatic loading states with CSS classes, aria-busy, and hidden element toggling.</p>
          </div>
        </div>
        
        <div class="demo-grid">
          <div class="demo-card">
            <h3>CSS Class Indicator</h3>
            <p class="demo-desc">Adds <code>is-loading</code> class to trigger element</p>
            <div class="code-preview">
              <code>data-alis-indicator="is-loading"</code>
            </div>
            <button class="btn btn-primary"
                    data-alis-get="/api/slow"
                    data-alis-target="#loading-result-1"
                    data-alis-indicator="is-loading">
              Load (2s delay)
            </button>
            <div id="loading-result-1" class="result-area mini"></div>
          </div>
          
          <div class="demo-card">
            <h3>Hidden Element Toggle</h3>
            <p class="demo-desc">Shows a hidden spinner element during request</p>
            <div class="code-preview">
              <code>data-alis-indicator="is-loading, #spinner"</code>
            </div>
            <div class="inline-flex">
              <button class="btn btn-primary"
                      data-alis-get="/api/slow"
                      data-alis-target="#loading-result-2"
                      data-alis-indicator="is-loading, #loading-spinner">
                Load with Spinner
              </button>
              <span id="loading-spinner" class="spinner" hidden></span>
            </div>
            <div id="loading-result-2" class="result-area mini"></div>
          </div>
        </div>
      </section>

      <!-- Retry Section -->
      <section id="retry" class="section">
        <div class="section-header">
          <div class="section-icon">üîÑ</div>
          <div>
            <h2 class="section-title">Auto Retry</h2>
            <p class="section-desc">Automatic retry with exponential backoff for failed requests. Configurable attempts and status codes.</p>
          </div>
        </div>
        
        <div class="demo-card">
          <div class="code-preview">
            <code>data-alis-retry="3" (retries 3 times on 500/502/503/504)</code>
          </div>
          
          <div class="demo-grid">
            <div>
              <h3>50% Failure Rate Endpoint</h3>
              <p class="demo-desc">This endpoint randomly fails. Watch the retry mechanism in action.</p>
              <button class="btn btn-primary"
                      data-alis-get="/api/unreliable"
                      data-alis-target="#retry-result"
                      data-alis-retry="3"
                      data-alis-indicator="is-loading">
                Try Unreliable API
              </button>
            </div>
            <div id="retry-result" class="result-area">
              <div class="empty-state">
                <span class="empty-icon">üé≤</span>
                <span>Click to test retry mechanism</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Confirm Section -->
      <section id="confirm" class="section">
        <div class="section-header">
          <div class="section-icon">‚ö†Ô∏è</div>
          <div>
            <h2 class="section-title">Confirmation Dialogs</h2>
            <p class="section-desc">Block requests until user confirms. Supports native confirm() or custom modal handlers.</p>
          </div>
        </div>
        
        <div class="demo-grid">
          <div class="demo-card">
            <h3>Native Confirm</h3>
            <p class="demo-desc">Uses browser's built-in confirm dialog</p>
            <div class="code-preview">
              <code>data-alis-confirm-message="Are you sure?"</code>
            </div>
            <button class="btn btn-danger"
                    data-alis-delete="/api/demo-delete"
                    data-alis-target="#confirm-result-1"
                    data-alis-confirm-message="Are you sure you want to delete this?">
              Delete with Native Confirm
            </button>
            <div id="confirm-result-1" class="result-area mini"></div>
          </div>
          
          <div class="demo-card">
            <h3>Custom Modal Confirm</h3>
            <p class="demo-desc">Uses registered custom confirm handler</p>
            <div class="code-preview">
              <code>data-alis-confirm="customConfirm"</code>
            </div>
            <button class="btn btn-danger"
                    data-alis-delete="/api/demo-delete"
                    data-alis-target="#confirm-result-2"
                    data-alis-confirm="customConfirm">
              Delete with Custom Modal
            </button>
            <div id="confirm-result-2" class="result-area mini"></div>
          </div>
        </div>
      </section>

      <!-- Hooks Section -->
      <section id="hooks" class="section">
        <div class="section-header">
          <div class="section-icon">ü™ù</div>
          <div>
            <h2 class="section-title">Lifecycle Hooks</h2>
            <p class="section-desc">Execute custom code before and after requests. Perfect for toasts, analytics, and custom UI updates.</p>
          </div>
        </div>
        
        <div class="demo-card">
          <div class="code-preview">
            <code>data-alis-on-before="validateForm" data-alis-on-after="showToast, refreshGrid"</code>
          </div>
          
          <div class="demo-grid">
            <div>
              <h3>onBefore Hook</h3>
              <p class="demo-desc">Return false to cancel the request</p>
              <button class="btn btn-primary"
                      data-alis-get="/api/hook-demo"
                      data-alis-target="#hooks-result"
                      data-alis-on-before="demoBeforeHook">
                Test onBefore (logs to console)
              </button>
            </div>
            <div>
              <h3>onAfter Hook</h3>
              <p class="demo-desc">Runs after request completes (success or error)</p>
              <button class="btn btn-primary"
                      data-alis-get="/api/hook-demo"
                      data-alis-target="#hooks-result"
                      data-alis-on-after="demoAfterHook">
                Test onAfter (shows toast)
              </button>
            </div>
          </div>
          <div id="hooks-result" class="result-area"></div>
        </div>
      </section>

      <!-- Container Collection Section -->
      <section id="container" class="section">
        <div class="section-header">
          <div class="section-icon">üì¶</div>
          <div>
            <h2 class="section-title">Container Collection</h2>
            <p class="section-desc">Collect values from any container, not just forms. Use <code>closest:</code> to find parent containers.</p>
          </div>
        </div>
        
        <div class="demo-card">
          <div class="code-preview">
            <code>data-alis-collect="closest:#filters"</code>
          </div>
          
          <div id="product-filters" class="filter-panel">
            <div class="form-group">
              <label>Product Name</label>
              <input type="text" name="name" class="input" placeholder="Search...">
            </div>
            <div class="form-group">
              <label>Category</label>
              <select name="category" class="input">
                <option value="">All</option>
                <option value="Electronics">Electronics</option>
                <option value="Furniture">Furniture</option>
              </select>
            </div>
            <div class="form-group">
              <label>Min Price</label>
              <input type="number" name="minPrice" class="input" value="0">
            </div>
            <div class="form-group">
              <label>Max Price</label>
              <input type="number" name="maxPrice" class="input" value="1000">
            </div>
            <button class="btn btn-primary"
                    data-alis-post="/api/products/filter"
                    data-alis-target="#products-result"
                    data-alis-collect="closest:#product-filters"
                    data-alis-indicator="is-loading">
              üîç Filter Products
            </button>
          </div>
          
          <div id="products-result" class="result-area">
            <div class="empty-state">
              <span class="empty-icon">üì¶</span>
              <span>Click Filter to see collected data</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Custom Components Section -->
      <section id="custom" class="section">
        <div class="section-header">
          <div class="section-icon">üé®</div>
          <div>
            <h2 class="section-title">Custom Components</h2>
            <p class="section-desc">Read values from complex UI components like Syncfusion, using custom selectors or functions.</p>
          </div>
        </div>
        
        <div class="demo-card">
          <div class="code-preview">
            <code>data-alis-value="#hidden-input" or data-alis-value-fn="getCustomValue"</code>
          </div>
          
          <div class="demo-grid">
            <div class="form-group">
              <label>Custom Slider Component</label>
              <div class="custom-slider" name="sliderValue" data-alis-value-fn="getSliderValue">
                <input type="range" id="slider-input" min="0" max="100" value="50">
                <span class="slider-value">50</span>
              </div>
            </div>
            <div class="form-group">
              <label>Hidden Input Component</label>
              <div class="custom-input" name="hiddenValue" data-alis-value="#hidden-value-input">
                <span class="display-value">Secret: ABC123</span>
                <input type="hidden" id="hidden-value-input" value="ABC123">
              </div>
            </div>
          </div>
          
          <button class="btn btn-primary"
                  data-alis-post="/api/custom-values"
                  data-alis-target="#custom-result"
                  data-alis-collect="closest:.demo-card">
            Submit Custom Values
          </button>
          <div id="custom-result" class="result-area"></div>
        </div>
      </section>

    </div>
  </main>

  <!-- Scripts -->
  <script src="/dist/alis.js"></script>
  <script src="/demo/public/app.js"></script>
</body>
</html>
