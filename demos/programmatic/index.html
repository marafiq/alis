<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>ALIS Demo â€“ Programmatic API</title>
  <link rel="stylesheet" href="../assets/demo.css">
</head>

<body>
  <main class="demo-card">
    <h1>Programmatic API Demo</h1>
    <p>Demonstrates <code>ALIS.request</code> and <code>ALIS.from()</code>.</p>

    <div class="panel stack" id="programmatic-demo">
      <label>
        Item Name
        <input id="item-name" value="Demo Item">
      </label>
      <button id="programmatic-save">Save via ALIS.request()</button>
    </div>

    <div id="programmatic-result" class="panel">Awaiting action.</div>
  </main>

  <script src="../../dist/alis.js"></script>
  <script>
    const button = document.getElementById('programmatic-save');
    const output = document.getElementById('programmatic-result');

    ALIS.init();

    button.addEventListener('click', async () => {
        const name = document.getElementById('item-name').value;
        try {
            // We use ALIS.request directly
            await ALIS.request({
                url: '/api/programmatic/save',
                method: 'POST',
                data: { name },
                target: '#programmatic-result',
                // Simulate a slow network via element config if we were declarative, 
                // but here we rely on the backend (mocked in test) to be slow.
                element: button // Bind to button for disable states
            });
        } catch (err) {
            console.error('Request failed', err);
            output.textContent = 'Error: ' + err.message;
        }
    });
  </script>
</body>

</html>
